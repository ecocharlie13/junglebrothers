
// Versão real com SVG simplificado para barras temporárias
function Gantt(selector, tasks, options = {}) {
  const container = document.querySelector(selector);
  container.innerHTML = "";

  const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
  svg.setAttribute("width", "100%");
  svg.setAttribute("height", tasks.length * 40 + 50);
  svg.style.background = "#fff";
  container.appendChild(svg);

  const barHeight = 20;
  const dayWidth = 20;
  const yStart = 30;
  const today = new Date();

  tasks.forEach((task, index) => {
    const start = new Date(task.start);
    const end = new Date(task.end);
    const x = (start - today) / (1000 * 60 * 60 * 24) * dayWidth + 200;
    const width = Math.max(1, (end - start) / (1000 * 60 * 60 * 24)) * dayWidth;
    const y = yStart + index * 40;

    const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
    rect.setAttribute("x", x);
    rect.setAttribute("y", y);
    rect.setAttribute("width", width);
    rect.setAttribute("height", barHeight);
    rect.setAttribute("fill", "#4ade80");
    rect.setAttribute("rx", "4");
    svg.appendChild(rect);

    const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
    text.setAttribute("x", x + 4);
    text.setAttribute("y", y + barHeight / 1.5);
    text.setAttribute("font-size", "12px");
    text.setAttribute("fill", "black");
    text.textContent = task.name;
    svg.appendChild(text);
  });

  console.log("Frappe Gantt SVG funcional iniciado com:", selector, tasks, options);
}
window.Gantt = Gantt;
